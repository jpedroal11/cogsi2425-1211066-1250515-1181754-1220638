---
- name: Check if Spring Boot app is responding
  uri:
    url: "http://localhost:8080/employees"
    method: GET
    status_code: 200
    timeout: 30
  register: health_check
  retries: 5
  delay: 10
  until: health_check.status == 200
  ignore_errors: yes

- name: Show health check result
  debug:
    msg: "✅ Spring Boot app health check: {{ health_check.status }}"
  when: health_check.status == 200

- name: Show health check failure
  debug:
    msg: "❌ Spring Boot app health check failed: {{ health_check.msg }}"
  when: health_check.status != 200